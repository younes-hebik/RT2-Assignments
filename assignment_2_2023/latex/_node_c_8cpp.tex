\hypertarget{_node_c_8cpp}{}\doxysection{src/\+NodeC.cpp File Reference}
\label{_node_c_8cpp}\index{src/NodeC.cpp@{src/NodeC.cpp}}


Implementation of a R\+OS node that serves as a server to provide the average speed and the distance of the robot from the goal.  


{\ttfamily \#include $<$ros/ros.\+h$>$}\newline
{\ttfamily \#include $<$actionlib/client/simple\+\_\+action\+\_\+client.\+h$>$}\newline
{\ttfamily \#include $<$actionlib/client/terminal\+\_\+state.\+h$>$}\newline
{\ttfamily \#include $<$assignment\+\_\+2\+\_\+2023/\+Planning\+Action.\+h$>$}\newline
{\ttfamily \#include $<$assignment\+\_\+2\+\_\+2023/\+Custom.\+h$>$}\newline
{\ttfamily \#include $<$assignment\+\_\+2\+\_\+2023/\+Csrv.\+h$>$}\newline
{\ttfamily \#include $<$assignment\+\_\+2\+\_\+2023/\+Avrg.\+h$>$}\newline
{\ttfamily \#include $<$geometry\+\_\+msgs/\+Point.\+h$>$}\newline
{\ttfamily \#include $<$nav\+\_\+msgs/\+Odometry.\+h$>$}\newline
{\ttfamily \#include $<$cmath$>$}\newline
{\ttfamily \#include $<$iostream$>$}\newline
Include dependency graph for Node\+C.\+cpp\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{_node_c_8cpp__incl}
\end{center}
\end{figure}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{_node_c_8cpp_a72ec89e77167cbb5e51ca26c5a2799b5}{chatter\+Callback4}} (const nav\+\_\+msgs\+::\+Odometry\+::\+Const\+Ptr \&od1)
\begin{DoxyCompactList}\small\item\em Callback function to get the instantaneous position coordinates and velocity from the odom topic. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_node_c_8cpp_a47d6f06de6feedce038424f4e3485bbb}{chatter\+Callback5}} (const assignment\+\_\+2\+\_\+2023\+::\+Planning\+Action\+Goal\+::\+Const\+Ptr \&goal1)
\begin{DoxyCompactList}\small\item\em Callback function to get the final goal position. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{_node_c_8cpp_a427fad646e02009f7c4a4ee0a4086209}{my\+\_\+random}} (assignment\+\_\+2\+\_\+2023\+::\+Avrg\+::\+Request \&req, assignment\+\_\+2\+\_\+2023\+::\+Avrg\+::\+Response \&res)
\begin{DoxyCompactList}\small\item\em Service callback function to provide the average speed and distance from the goal. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{_node_c_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}{main}} (int argc, char $\ast$$\ast$argv)
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{_node_c_8cpp_a7e4db3f7c2dea6dbf8df40341f57afd7}\label{_node_c_8cpp_a7e4db3f7c2dea6dbf8df40341f57afd7}} 
float \mbox{\hyperlink{_node_c_8cpp_a7e4db3f7c2dea6dbf8df40341f57afd7}{dis\+\_\+x}}
\begin{DoxyCompactList}\small\item\em Position of the robot on the x-\/axis. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{_node_c_8cpp_af80c563a75376d23a6f645ad4d0a143b}\label{_node_c_8cpp_af80c563a75376d23a6f645ad4d0a143b}} 
float \mbox{\hyperlink{_node_c_8cpp_af80c563a75376d23a6f645ad4d0a143b}{dis\+\_\+y}}
\begin{DoxyCompactList}\small\item\em Position of the robot on the y-\/axis. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{_node_c_8cpp_abdcde452116573a9270f38cf18b92d4b}\label{_node_c_8cpp_abdcde452116573a9270f38cf18b92d4b}} 
float \mbox{\hyperlink{_node_c_8cpp_abdcde452116573a9270f38cf18b92d4b}{speed\+\_\+x}}
\begin{DoxyCompactList}\small\item\em Velocity of the robot on the x-\/axis. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{_node_c_8cpp_af3722ee992edcbdb236c16027445f5e3}\label{_node_c_8cpp_af3722ee992edcbdb236c16027445f5e3}} 
float \mbox{\hyperlink{_node_c_8cpp_af3722ee992edcbdb236c16027445f5e3}{speed\+\_\+y}}
\begin{DoxyCompactList}\small\item\em Velocity of the robot on the y-\/axis. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{_node_c_8cpp_a7a6d95fba5f9ddbcac17f85025da5a45}\label{_node_c_8cpp_a7a6d95fba5f9ddbcac17f85025da5a45}} 
float \mbox{\hyperlink{_node_c_8cpp_a7a6d95fba5f9ddbcac17f85025da5a45}{final\+\_\+x}}
\begin{DoxyCompactList}\small\item\em Goal position on the x-\/axis. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{_node_c_8cpp_a24d3e1642322e0a206cf1becf43087fd}\label{_node_c_8cpp_a24d3e1642322e0a206cf1becf43087fd}} 
float \mbox{\hyperlink{_node_c_8cpp_a24d3e1642322e0a206cf1becf43087fd}{final\+\_\+y}}
\begin{DoxyCompactList}\small\item\em Goal position on the y-\/axis. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{_node_c_8cpp_a9eae6c1f38db98ab568f3ed3771a969d}\label{_node_c_8cpp_a9eae6c1f38db98ab568f3ed3771a969d}} 
float {\bfseries dx}
\item 
\mbox{\Hypertarget{_node_c_8cpp_a8f461b6142ce8725218813abb23b06a3}\label{_node_c_8cpp_a8f461b6142ce8725218813abb23b06a3}} 
float {\bfseries dy}
\item 
\mbox{\Hypertarget{_node_c_8cpp_a3fbbd8a3959e76a2bc3455d3bade52dc}\label{_node_c_8cpp_a3fbbd8a3959e76a2bc3455d3bade52dc}} 
float \mbox{\hyperlink{_node_c_8cpp_a3fbbd8a3959e76a2bc3455d3bade52dc}{d}}
\begin{DoxyCompactList}\small\item\em Distance left to reach the goal. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{_node_c_8cpp_add977c0d30ca7b922e5c4c9d76a64676}\label{_node_c_8cpp_add977c0d30ca7b922e5c4c9d76a64676}} 
float {\bfseries spd} = 0.\+0
\item 
\mbox{\Hypertarget{_node_c_8cpp_acb559820d9ca11295b4500f179ef6392}\label{_node_c_8cpp_acb559820d9ca11295b4500f179ef6392}} 
int {\bfseries i}
\item 
\mbox{\Hypertarget{_node_c_8cpp_a9d188a4fea323d88c96c21e85ca7006c}\label{_node_c_8cpp_a9d188a4fea323d88c96c21e85ca7006c}} 
float \mbox{\hyperlink{_node_c_8cpp_a9d188a4fea323d88c96c21e85ca7006c}{spdf}}
\begin{DoxyCompactList}\small\item\em Average speed. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Implementation of a R\+OS node that serves as a server to provide the average speed and the distance of the robot from the goal. 

\begin{DoxyAuthor}{Author}
Younes Hebik 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
03/03/2024 
\end{DoxyDate}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{_node_c_8cpp_a72ec89e77167cbb5e51ca26c5a2799b5}\label{_node_c_8cpp_a72ec89e77167cbb5e51ca26c5a2799b5}} 
\index{NodeC.cpp@{NodeC.cpp}!chatterCallback4@{chatterCallback4}}
\index{chatterCallback4@{chatterCallback4}!NodeC.cpp@{NodeC.cpp}}
\doxysubsubsection{\texorpdfstring{chatterCallback4()}{chatterCallback4()}}
{\footnotesize\ttfamily void chatter\+Callback4 (\begin{DoxyParamCaption}\item[{const nav\+\_\+msgs\+::\+Odometry\+::\+Const\+Ptr \&}]{od1 }\end{DoxyParamCaption})}



Callback function to get the instantaneous position coordinates and velocity from the odom topic. 


\begin{DoxyParams}{Parameters}
{\em od1} & Odometry message containing the robot\textquotesingle{}s position and velocity.\\
\hline
\end{DoxyParams}
This function updates the global variables dis\+\_\+x, dis\+\_\+y, speed\+\_\+x, and speed\+\_\+y with the robot\textquotesingle{}s current position and velocity.

\begin{DoxyNote}{Note}
Subscribed to the \char`\"{}odom\char`\"{} topic. 
\end{DoxyNote}
\mbox{\Hypertarget{_node_c_8cpp_a47d6f06de6feedce038424f4e3485bbb}\label{_node_c_8cpp_a47d6f06de6feedce038424f4e3485bbb}} 
\index{NodeC.cpp@{NodeC.cpp}!chatterCallback5@{chatterCallback5}}
\index{chatterCallback5@{chatterCallback5}!NodeC.cpp@{NodeC.cpp}}
\doxysubsubsection{\texorpdfstring{chatterCallback5()}{chatterCallback5()}}
{\footnotesize\ttfamily void chatter\+Callback5 (\begin{DoxyParamCaption}\item[{const assignment\+\_\+2\+\_\+2023\+::\+Planning\+Action\+Goal\+::\+Const\+Ptr \&}]{goal1 }\end{DoxyParamCaption})}



Callback function to get the final goal position. 


\begin{DoxyParams}{Parameters}
{\em goal1} & Planning\+Action\+Goal message containing the target position.\\
\hline
\end{DoxyParams}
This function updates the global variables final\+\_\+x and final\+\_\+y with the goal\textquotesingle{}s position.

\begin{DoxyNote}{Note}
Subscribed to the \char`\"{}reaching\+\_\+goal/goal\char`\"{} topic. 
\end{DoxyNote}
\mbox{\Hypertarget{_node_c_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}\label{_node_c_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}} 
\index{NodeC.cpp@{NodeC.cpp}!main@{main}}
\index{main@{main}!NodeC.cpp@{NodeC.cpp}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily int main (\begin{DoxyParamCaption}\item[{int}]{argc,  }\item[{char $\ast$$\ast$}]{argv }\end{DoxyParamCaption})}

$<$ Initialize a subscriber on the odom topic.

$<$ Initialize a subscriber on the reaching\+\_\+goal/goal topic.

$<$ Initialize a server to provide the average speed and the distance of the robot from the goal. The service is called \char`\"{}/speed\+\_\+distance\char`\"{}.\mbox{\Hypertarget{_node_c_8cpp_a427fad646e02009f7c4a4ee0a4086209}\label{_node_c_8cpp_a427fad646e02009f7c4a4ee0a4086209}} 
\index{NodeC.cpp@{NodeC.cpp}!my\_random@{my\_random}}
\index{my\_random@{my\_random}!NodeC.cpp@{NodeC.cpp}}
\doxysubsubsection{\texorpdfstring{my\_random()}{my\_random()}}
{\footnotesize\ttfamily bool my\+\_\+random (\begin{DoxyParamCaption}\item[{assignment\+\_\+2\+\_\+2023\+::\+Avrg\+::\+Request \&}]{req,  }\item[{assignment\+\_\+2\+\_\+2023\+::\+Avrg\+::\+Response \&}]{res }\end{DoxyParamCaption})}



Service callback function to provide the average speed and distance from the goal. 


\begin{DoxyParams}{Parameters}
{\em req} & Request part of the service (not used in this case). \\
\hline
{\em res} & Response part of the service, containing the average speed and distance to the goal. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Always returns true.
\end{DoxyReturn}
This function sets the response fields dis and speed with the calculated distance and average speed.

\begin{DoxyNote}{Note}
Advertised as the \char`\"{}/speed\+\_\+distance\char`\"{} service. 
\end{DoxyNote}
